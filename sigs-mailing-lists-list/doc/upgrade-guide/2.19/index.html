<!DOCTYPE html>
<html>
<head>
<title>
Jenkins Upgrade Guide
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins is an open source automation server" name="description">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sites/default/files/jenkins_favicon.ico" rel="shortcut icon" type="image/x-icon">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/img/favicon.ico" rel="icon" sizes="32x32" type="img/png">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/img/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/img/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/img/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/img/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/img/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152">
<meta content="Jenkins Upgrade Guide" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Jenkins Upgrade Guide" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software." name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<!-- Open Graph data -->
<meta content="Jenkins Upgrade Guide" property="og:title">
<meta content="article" property="og:type">
<meta content="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/upgrade-guide/2.19/index.html" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software." name="og:description">
<meta content="Jenkins Upgrade Guide" property="og:site_name">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/assets/bower/tether/css/tether.min.css" media="screen" rel="stylesheet">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/css/font-icons.css" media="screen" rel="stylesheet">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/css/jenkins.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/assets/bower/ionicons/css/ionicons.min.css" media="screen" rel="stylesheet">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/css/footer.css" media="screen" rel="stylesheet">
<link href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/css/font-awesome.min.css" media="screen" rel="stylesheet">
</head>
<body>
<script src="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/assets/bower/jquery/jquery.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<nav class="navbar navbar-expand-md navbar-dark top bg-dark fixed-top" id="ji-toolbar">
<a class="navbar-brand" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list">
Jenkins
</a>
<button class="navbar-toggler" data-target="#CollapsingNavbar" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="CollapsingNavbar">
<ul class="nav navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/node">
Blog
</a>
</li>
<li class="nav-item dropdown">
<div aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button">
Documentation
</div>
<div class="dropdown-menu">
<a class="dropdown-item" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc">
Use Jenkins
</a>
<a class="dropdown-item" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/developer">
Extend Jenkins
</a>
<span class="dropdown-item">
<strong>
Use-cases
</strong>
</span>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/android">
&nbsp;-&nbsp;Android
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/c">
&nbsp;-&nbsp;C/C++
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/docker">
&nbsp;-&nbsp;Docker
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/embedded">
&nbsp;-&nbsp;Embedded
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/github">
&nbsp;-&nbsp;GitHub
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/java">
&nbsp;-&nbsp;Java
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/php">
&nbsp;-&nbsp;PHP
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/pipeline">
&nbsp;-&nbsp;Continuous Delivery
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/python">
&nbsp;-&nbsp;Python
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/ruby">
&nbsp;-&nbsp;Ruby
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li class="nav-item dropdown">
<div aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button">
Community
</div>
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/participate">
Overview
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/chat" title="Chat with the rest of the Jenkins community on IRC">
Chat
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/jam">
Meet
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/events">
Events
</a>
<a class="dropdown-item feature" href="https://issues.jenkins-ci.org/">
Issue Tracker
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/mailing-lists" title="Browse Jenkins mailing list archives and/or subscribe to lists">
Mailing Lists
</a>
<a class="dropdown-item feature" href="https://wiki.jenkins.io/">
Wiki
</a>
<a class="dropdown-item feature" href="https://accounts.jenkins.io/" title="Create/manage your account for accessing wiki, issue tracker, etc">
Account Management
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs/">
<strong>
Special Interest Groups
</strong>
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs/advocacy-and-outreach/">
&nbsp;-&nbsp;Advocacy and Outreach
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs/chinese-localization/">
&nbsp;-&nbsp;Chinese Localization
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs/cloud-native/">
&nbsp;-&nbsp;Cloud Native
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs/gsoc/">
&nbsp;-&nbsp;Google Summer of Code
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs/hw-and-eda/">
&nbsp;-&nbsp;Hardware and EDA
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs/mailing-lists/">
&nbsp;-&nbsp;Jenkins Special Interest Groups
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs/pipeline-authoring/">
&nbsp;-&nbsp;Pipeline Authoring
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs/platform/">
&nbsp;-&nbsp;Platform
</a>
</div>
</li>
<li class="dropdown nav-item">
<div aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button">Sub-projects</div>
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/">
Overview
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/blueocean/">
Blue Ocean
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/evergreen/">
Evergreen
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/gsoc/">
Google Summer of Code in Jenkins
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/infrastructure/">
Infrastructure
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/jam/">
Jenkins Area Meetups
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/jcasc/">
Jenkins Configuration as Code
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/jenkins-x/">
Jenkins X
</a>
<a class="dropdown-item feature" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/projects/remoting/">
Jenkins Remoting
</a>
</div>
</li>
<li class="nav-item dropdown">
<div aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button">
About
</div>
<div class="dropdown-menu">
<a class="dropdown-item" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/security">
Security
</a>
<a class="dropdown-item" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/press">
Press
</a>
<a class="dropdown-item" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/awards">
Awards
</a>
<a class="dropdown-item" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/project/conduct">
Conduct
</a>
<a class="dropdown-item" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/artwork">
Artwork
</a>
</div>
</li>
<li class="nav-item dropdown">
<div aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button">
English
</div>
<div class="dropdown-menu">
<a class="dropdown-item" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/zh">
中文 Chinese
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link btn btn-outline-secondary" href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/download">
Download
</a>
</li>
</ul>
</div>
</nav>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<script>
  $(function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>
<div class="container">
<div class="row body">
<div class="col-lg-3">
<div class="sidebar-nav tour">
<p>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc" class="">Jenkins User Documentation Home</a>
</p>
<h4>
Guided Tour
</h4>
<ul>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/pipeline/tour/getting-started" class="">Getting started</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/pipeline/tour/hello-world" class="">Creating your first Pipeline</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/pipeline/tour/running-multiple-steps" class="">Running multiple steps</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/pipeline/tour/agents" class="">Defining execution environments</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/pipeline/tour/environment" class="">Using environment variables</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/pipeline/tour/tests-and-artifacts" class="">Recording test results and artifacts</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/pipeline/tour/post" class="">Cleaning up and notifications</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/pipeline/tour/deployment" class="">Deployment</a>
</li>
</ul>
<h4>
Tutorials
</h4>
<ul>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/tutorials" class="">Overview</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/tutorials/build-a-java-app-with-maven" class="">Build a Java app with Maven</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/tutorials/build-a-node-js-and-react-app-with-npm" class="">Build a Node.js and React app with npm</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/tutorials/build-a-python-app-with-pyinstaller" class="">Build a Python app with PyInstaller</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/tutorials/create-a-pipeline-in-blue-ocean" class="">Create a Pipeline in Blue Ocean</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/tutorials/build-a-multibranch-pipeline-project" class="">End-to-End Multibranch Pipeline Project Creation</a>
</li>
</ul>
<h4>
User Handbook
<span style="font-size: 0.6rem; vertical-align: middle;">
<a href="/user-handbook.pdf">
(PDF)
</a>
</span>
</h4>
<ul>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/getting-started" class="">User Handbook overview</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/installing" class="">Installing Jenkins</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/using" class="">Using Jenkins</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/pipeline" class="">Pipeline</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/blueocean" class="">Blue Ocean</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/managing" class="">Managing Jenkins</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/system-administration" class="">System Administration</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/scaling" class="">Scaling Jenkins</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/appendix" class="">Appendix</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/glossary" class="">Glossary</a>
</li>
</ul>
<h4>
Resources
</h4>
<ul>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/book/pipeline/syntax" class="">Pipeline Syntax reference</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/pipeline/steps" class="">Pipeline Steps reference</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc/upgrade-guide" class="active">LTS Upgrade Guide</a>
</li>
</ul>
<h5>
Recent Tutorial Blog Posts
</h5>
<ul>
<li>
<a href="/blog/2017/11/27/tutorials-in-the-jenkins-user-documentation/">
Introducing Tutorials in the Jenkins User Documentation
</a>
</li>
<li>
<a href="/blog/2017/05/18/pipeline-dev-tools/">
Pipeline Development Tools
</a>
</li>
<li>
<a href="/blog/2017/04/12/welcome-to-blue-ocean-dashboard/">
Getting Started with the Blue Ocean Dashboard
</a>
</li>
</ul>
<div class="small">
<a href="/node/tags/tutorial">
View all tutorial blog posts
</a>
</div>
<p></p>
</div>
</div>
<div class="col-lg-9">
<div class="sect1">
<h2 id="upgrading-to-jenkins-lts-2-19-x"><a class="anchor" href="#upgrading-to-jenkins-lts-2-19-x"></a>Upgrading to Jenkins LTS 2.19.x</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each section covers the upgrade from the previous LTS release, the section on 2.19.1 covers the upgrade from 2.7.4.</p>
</div>
<div class="sect2">
<h3 id="upgrading-to-jenkins-lts-2-19-4"><a class="anchor" href="#upgrading-to-jenkins-lts-2-19-4"></a>Upgrading to Jenkins LTS 2.19.4</h3>
<div class="sect3">
<h4 id="jnlp-agent-protocol-options-werent-correctly-persisted"><a class="anchor" href="#jnlp-agent-protocol-options-werent-correctly-persisted"></a>JNLP agent protocol options weren&#8217;t correctly persisted</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-39465">JENKINS-39465</a></p>
</div>
<div class="paragraph">
<p>The JNLP agent protocol configuration could not be loaded from disk after a Jenkins restart.</p>
</div>
<div class="paragraph">
<p>If you customized these settings since 2.19.1, review that they are configured as expected.</p>
</div>
</div>
<div class="sect3">
<h4 id="honor-jenkins-model-jenkins-slaveagentport-again"><a class="anchor" href="#honor-jenkins-model-jenkins-slaveagentport-again"></a>Honor <code>jenkins.model.Jenkins.slaveAgentPort</code> again</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-38187">JENKINS-38187</a></p>
</div>
<div class="paragraph">
<p>A regression in Jenkins 2.0 caused Jenkins to ignore the System property <code>jenkins.model.Jenkins.slaveAgentPort</code>.</p>
</div>
<div class="paragraph">
<p>The previous behavior has been restored, and a new System property <code>jenkins.model.Jenkins.slaveAgentPort</code> added that, if set, will enforce the JNLP agent port on every Jenkins startup, and will not allow the value to be changed through the UI.</p>
</div>
<div class="paragraph">
<p>It can still be changed via Groovy scripting for troubleshooting purposes, but any change will be reverted on startup.</p>
</div>
</div>
<div class="sect3">
<h4 id="text-boxes-on-configuration-screens-will-no-longer-stretch-to-accomodate-long-lines"><a class="anchor" href="#text-boxes-on-configuration-screens-will-no-longer-stretch-to-accomodate-long-lines"></a>Text boxes on configuration screens will no longer stretch to accomodate long lines</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-27367">JENKINS-27367</a></p>
</div>
<div class="paragraph">
<p>The layout of job configuration screens will no longer break if users don&#8217;t insert extra line breaks to break long lines. Instead, the text box will allow horizontal scrolling.</p>
</div>
</div>
<div class="sect3">
<h4 id="dont-spawn-numerous-threads-on-the-agent-build-history-page"><a class="anchor" href="#dont-spawn-numerous-threads-on-the-agent-build-history-page"></a>Don&#8217;t spawn numerous threads on the agent build history page</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-23244">JENKINS-23244</a></p>
</div>
<div class="paragraph">
<p>The build history for specific agents has long caused numerous potentially long-running threads to spawn. This has been fixed.</p>
</div>
</div>
<div class="sect3">
<h4 id="memory-leak-on-dashboard-fixed"><a class="anchor" href="#memory-leak-on-dashboard-fixed"></a>Memory leak on dashboard fixed</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-10912">JENKINS-10912</a></p>
</div>
<div class="paragraph">
<p>A memory leak on the dashboard (view pages) was fixed, so that browser memory use will no longer grow unbounded.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="upgrading-to-jenkins-lts-2-19-3"><a class="anchor" href="#upgrading-to-jenkins-lts-2-19-3"></a>Upgrading to Jenkins LTS 2.19.3</h3>
<div class="sect3">
<h4 id="expansion-of-the-serialization-blacklist"><a class="anchor" href="#expansion-of-the-serialization-blacklist"></a>Expansion of the serialization blacklist</h4>
<div class="paragraph">
<p><a href="https://wiki.jenkins-ci.org/display/SECURITY/Jenkins+Security+Advisory+2016-11-16">Security Advisory 2016-11-16</a></p>
</div>
<div class="paragraph">
<p>The major part of the security fix is an expansion of the serialization blacklist used for remoting (Jenkins CLI and master/agent communication) and XStream (XML configuration and data files).</p>
</div>
<div class="paragraph">
<p>It is possible that legitimate uses of classes in blacklisted packages will no longer work. This will be indicated by any of the following in exception messages in logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Rejected: com.sun.jndi.rmi.EvilClass
Refusing to unmarshal com.sun.jndi.rmi.EvilClass for security reasons
Refusing to marshal com.sun.jndi.rmi.EvilClass for security reasons</pre>
</div>
</div>
<div class="paragraph">
<p>In these examples, <code>com.sun.jndi.rmi.EvilClass</code> is a placeholder for a real class name.</p>
</div>
<div class="paragraph">
<p>It is possible to customize the blacklist used by setting the <code>hudson.remoting.ClassFilter.DEFAULTS_OVERRIDE_LOCATION</code> System property for the Jenkins master <code>java</code> invocation. It is expected to be set to the path to a file containing a complete, custom blacklist overriding the default one.</p>
</div>
<div class="paragraph">
<p>The default blacklist is defined in <a href="https://github.com/jenkinsci/remoting/blob/remoting-3.2/src/main/java/hudson/remoting/ClassFilter.java#L57&#8230;&#8203;L79"><code>ClassFilter.java</code> in the remoting component</a>. In a configuration file as used for <code>hudson.remoting.ClassFilter.DEFAULTS_OVERRIDE_LOCATION</code>, the default blacklist would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">^bsh[.].*
^com[.]google[.]inject[.].*
^com[.]mchange[.]v2[.]c3p0[.].*
^com[.]sun[.]jndi[.].*
^com[.]sun[.]corba[.].*
^com[.]sun[.]javafx[.].*
^com[.]sun[.]org[.]apache[.]regex[.]internal[.].*
^java[.]awt[.].*
^java[.]rmi[.].*
^javax[.]management[.].*
^javax[.]naming[.].*
^javax[.]script[.].*
^javax[.]swing[.].*
^org[.]apache[.]commons[.]beanutils[.].*
^org[.]apache[.]commons[.]collections[.]functors[.].*
^org[.]apache[.]myfaces[.].*
^org[.]apache[.]wicket[.].*
.*org[.]apache[.]xalan.*
^org[.]codehaus[.]groovy[.]runtime[.].*
^org[.]hibernate[.].*
^org[.]python[.].*
^org[.]springframework[.](?!(\p{Alnum}+[.])*\p{Alnum}*Exception$).*
^sun[.]rmi[.].*</pre>
</div>
</div>
<div class="paragraph">
<p>To check whether any given class name is blacklisted, run the following command in <em>Manage Jenkins » Script Console</em>, replacing <code>com.sun.jndi.rmi.EvilClass</code> with the class name you want to check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">hudson.remoting.ClassFilter.DEFAULT.isBlacklisted('com.sun.jndi.rmi.EvilClass')</pre>
</div>
</div>
<div class="paragraph">
<p>Removing or relaxing entries on this blacklist must be done carefully as to not open yourself up to known exploits. A possible alternative could be to disable the CLI via HTTP and JNLP agent port (see below) to prevent its unauthenticated use.</p>
</div>
</div>
<div class="sect3">
<h4 id="disabling-the-cli"><a class="anchor" href="#disabling-the-cli"></a>Disabling the CLI</h4>
<div class="paragraph">
<p>Another change in Jenkins 2.19.3 is the new feature to disable the CLI over HTTP and JNLP by setting the System property <code>jenkins.CLI.disabled</code> to <code>true</code>. This is a more convenient alternative to run the <a href="https://github.com/jenkinsci-cert/SECURITY-218/">Groovy script provided as a workaround to SECURITY-218 and SECURITY-360</a> for users who do not want to allow unauthenticated access to the Jenkins CLI even with the security fix.</p>
</div>
<div class="paragraph">
<p>While the CLI can be used using the Jenkins integrated SSH daemon as well, this requires authentication, so it&#8217;s not a vector for unauthenticated attacks. To disable this feature as well, disable the SSH server port in <em>Manage Jenkins » Configure Jenkins » SSH Server</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="upgrading-to-jenkins-lts-2-19-2"><a class="anchor" href="#upgrading-to-jenkins-lts-2-19-2"></a>Upgrading to Jenkins LTS 2.19.2</h3>
<div class="sect3">
<h4 id="fixes-to-cli-over-http"><a class="anchor" href="#fixes-to-cli-over-http"></a>Fixes to CLI over HTTP</h4>
<div class="paragraph">
<p>CLI over HTTP (when the JNLP port is disabled) now works with CSRF protection enabled and does not need explicitly setting <code>hudson.diyChunking</code>. So any workarounds applied for previous versions of Jenkins to make the CLI work can now be reverted.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="upgrading-to-jenkins-lts-2-19-1"><a class="anchor" href="#upgrading-to-jenkins-lts-2-19-1"></a>Upgrading to Jenkins LTS 2.19.1</h3>
<div class="sect3">
<h4 id="plugin-dependency-resolution-fix"><a class="anchor" href="#plugin-dependency-resolution-fix"></a>Plugin dependency resolution fix</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-21486">JENKINS-21486</a></p>
</div>
<div class="paragraph">
<p>Previous versions allowed Jenkins to run with invalid plugin configurations. For example, plugins depending on other plugins were loaded even if those dependencies were outdated, or disabled. This could result in difficult to debug errors at run time.</p>
</div>
<div class="paragraph">
<p>Now, Jenkins will refuse to load plugins with unsatisfied dependencies. Diagnostic messages explaining this will be written to the Jenkins log during startup, and we strongly recommend monitoring that after upgrading.</p>
</div>
</div>
<div class="sect3">
<h4 id="form-autocompletion-disabled"><a class="anchor" href="#form-autocompletion-disabled"></a>Form autocompletion disabled</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-18435">JENKINS-18435</a></p>
</div>
<div class="paragraph">
<p>A long-standing problem with JavaScript-heavy configuration forms was that submitting a form, then using the web browser Back button to return to the form resulted in the wrong form contents. Submitting the form again would then result in unexpectedly broken configuration.</p>
</div>
<div class="paragraph">
<p>To work around this problem, we disabled autocompletion for almost all form fields.</p>
</div>
</div>
<div class="sect3">
<h4 id="agent-protocol-selection-in-security-configuration"><a class="anchor" href="#agent-protocol-selection-in-security-configuration"></a>Agent protocol selection in security configuration</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-37032">JENKINS-37032</a></p>
</div>
<div class="paragraph">
<p>The Configure Global Security form now includes options to enable/disable specific agent protocol versions, along with short descriptions of each protocol. There is no general guidance on when to customize the status of specific protocols, but it may be needed in the future.</p>
</div>
</div>
<div class="sect3">
<h4 id="hiding-the-java-web-start-launcher"><a class="anchor" href="#hiding-the-java-web-start-launcher"></a>Hiding the Java Web Start launcher</h4>
<div class="paragraph">
<p><a href="https://issues.jenkins-ci.org/browse/JENKINS-36996">JENKINS-36996</a></p>
</div>
<div class="paragraph">
<p>By default, new Jenkins 2 instances will have the JNLP agent port disabled. As this is a requirement for the JNLP Web Start launch method for build agents to work, this form option will now be hidden if the port is disabled. To make it show up, just enable the JNLP agent port in the Global Security Configuration.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>


<script src="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/assets/bower/anchor-js/anchor.min.js"></script>
<script src="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/assets/bower/tether/js/tether.min.js"></script>
<script src="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<footer id="footer">
<div class="container">
<div class="row">
<div class="col-md-4">
<p class="box">
<a href="https://github.com/jenkins-infra/jenkins.io/edit/master/content//doc/upgrade-guide/2.19.adoc" title="Edit /doc/upgrade-guide/2.19.adoc on GitHub">
Improve this page
</a>
|
<a href="https://github.com/jenkins-infra/jenkins.io/commits/master/content//doc/upgrade-guide/2.19.adoc" title="View /doc/upgrade-guide/2.19.adoc history on GitHub">
Page history
</a>
</p>
<div class="license-box">
<div id="creativecommons">
<a href="https://creativecommons.org/licenses/by-sa/4.0/">
<p>
<img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
</p>
</a>
<p>
The content driving this site is licensed under the Creative
Commons Attribution-ShareAlike 4.0 license.
</p>
</div>
</div>
</div>
<div class="links col-md-8">
<div class="container">
<div class="row">
<div class="area col-md-3">
<div class="div-mar">
<h5>Resources</h5>
<ul class="resources">
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/events">
Events
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/doc">
Documentation
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/node">
Blog
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Solutions</h5>
<ul>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/android">
Android
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/c">
C/C++
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/docker">
Docker
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/embedded">
Embedded
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/github">
GitHub
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/java">
Java
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/php">
PHP
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/pipeline">
Continuous Delivery
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/python">
Python
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/solutions/ruby">
Ruby
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Project</h5>
<ul class="project">
<li>
<a href="https://issues.jenkins-ci.org">
Issue tracker
</a>
</li>
<li>
<a href="https://wiki.jenkins.io">
Wiki
</a>
</li>
<li>
<a href="https://github.com/jenkinsci">
GitHub
</a>
</li>
<li>
<a href="https://ci.jenkins.io">
Jenkins on Jenkins
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Community</h5>
<ul class="community">
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-users">
Users mailing list
</a>
</li>
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-dev">
Developers mailing list
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/sigs">
Special Interest Groups
</a>
</li>
<li>
<a href="https://twitter.com/jenkinsci">
Twitter
</a>
</li>
<li>
<a href="https://reddit.com/r/jenkinsci">
Reddit
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/merchandise">
Merchandise
</a>
</li>
<li>
<a href="https://sp1r.github.io/jenkins.io/sigs-mailing-lists-list/awards">
Awards
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  !function(d,s,id) {
    var js, fjs=d.getElementsByTagName(s)[0];
    if (!d.getElementById(id)) {
      js = d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
</script>
</body>
</html>
